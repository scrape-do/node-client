# @scrape-do/client

#### Scrape.do's official http client for node.js

## How to install?

```console
npm install @scrape-do/client
# or get it from github
npm install git://git@github.com/scrape-do/node-client
```

## How to build from scratch

#### If you want to contribute to the library or include your own customisations, you can recompile the library in this way.

```console
git clone https://github.com/scrape-do/node-client
npm i
# build with
npm build
```

## Example Usages

### super (residental proxy)

#### The super parameter enables the use of a residential proxy for the request. When this parameter is set to true, the request will be routed through a residential IP address. This means that the IP address will typically appear as if it belongs to a mobile network provider, adding an additional layer of anonymity and making the request look more like regular web traffic.

```typescript
const client = new ScrapeDo("example_token");
const response = await client.sendRequest("GET", {
  url: "https://httpbin.co/anything",
  super: true,
});

console.log(response.data);
```

### customHeaders

#### The customHeaders option gives you full control over all headers sent to the target website. When you use customHeaders, the headers you provide will completely replace the default ones. This feature is useful when you need to define specific headers like User-Agent, Accept, Cookies, and more, ensuring that only your specified headers are sent with the request.

```typescript
const client = new ScrapeDo("example_token");
const response = await client.sendRequest("GET", {
  url: "https://httpbin.co/anything",
  customHeaders: {
    Key: "Value",
  },
});

console.log(response.data);
```

### extraHeaders

#### extraHeaders is used when you want to add one or more headers specifically required by the target website, without altering the core headers automatically generated by the service. This is useful for passing additional information while maintaining the integrity of the existing request headers.

#### The following example returns the response of how you requested from httpbin.co. You should see the ‘Key’ header in the header section of the response.

```typescript
const client = new ScrapeDo("example_token");
const response = await client.sendRequest("GET", {
  url: "https://httpbin.co/anything",
  extraHeaders: {
    Key: "Value",
  },
});

console.log(response.data);
```

### forwardHeaders

#### The forwardHeaders option is ideal when you want to forward your custom headers directly to the target website without any additional headers being generated or modified by the service. This approach makes the request appear as if it is being made directly from your end, preserving the original header structure.

```typescript
const client = new ScrapeDo("example_token");
const response = await client.sendRequest("GET", {
  url: "https://httpbin.co/anything",
  forwardHeaders: {
    Key: "Value",
  },
});

console.log(response.data);
```

### render (javascript execution - humanized browser rendering)

#### The render parameter allows for the execution of JavaScript during the request, enabling full browser-like rendering. When this parameter is set to true, the service will render the target webpage as if it were being loaded in a real browser, executing all JavaScript, loading dynamic content, and handling client-side interactions. This approach is particularly useful for scraping websites that rely heavily on JavaScript to display their content, providing a more accurate and “humanized” view of the page.

```typescript
const client = new ScrapeDo("example_token");
const response = await client.sendRequest("GET", {
  url: "https://httpbin.co/anything",
  render: true,
});

console.log(response.data);
```

### final bonus example (render, super, geoCode, playWithBrowser)

#### In this example, multiple parameters are combined to showcase advanced scraping capabilities. By using a combination of render, super, geoCode, and playWithBrowser, you can perform complex scraping tasks that require JavaScript execution, residential proxies, geographical targeting, and interactive browser actions:

- [render: true](https://scrape.do/documentation/#js-render?utm_source=github&utm_medium=node-client): Enables JavaScript execution to fully render the webpage, allowing for the scraping of dynamic content that relies on client-side scripting.
- [super: true](https://scrape.do/documentation/#super-residential--mobile?utm_source=github&utm_medium=node-client): Utilizes a residential proxy, which makes the request appear as if it is coming from a typical user on a mobile network, providing enhanced anonymity and avoiding blocks from anti-scraping measures.
- [geoCode](https://scrape.do/documentation/#geo-targeting?utm_source=github&utm_medium=node-client): "us": Targets a specific geographic location for the request, in this case, the United States. This is useful for scraping content that varies by region, such as localized prices or region-specific data.
- [playWithBrowser](https://scrape.do/documentation/#play-with-browser?utm_source=github&utm_medium=node-client): Provides the ability to interact with the browser while rendering the page. For example, you can wait for specific elements to load or perform actions like clicking buttons. In this case, it waits for the <body> element to ensure the page is fully loaded before proceeding.

```typescript
const client = new ScrapeDo("example_token");
const response = await client.sendRequest("GET", {
  url: "https://ExampleProtectedDomain.com/prices",
  render: true,
  super: true,
  geoCode: "us",
  playWithBrowser: [
    {
      Action: "WaitSelector",
      WaitSelector: "body",
    },
  ],
});

console.log(response.data);
```

## Official links

- [Scrape.do](https://scrape.do?utm_source=github&utm_medium=node-client)
  - [Documentation](https://scrape.do/documentation/?utm_source=github&utm_medium=node-client)
  - [Features](https://scrape.do/#features?utm_source=github&utm_medium=node-client)
- [Blog](https://scrape.do/blog/?utm_source=github&utm_medium=node-client)
- [LinkedIn](https://www.linkedin.com/company/scrape-do/)

## License

### This project is licensed under the MIT License. See the [LICENSE](./LICENSE) file for more details.

## Disclaimer

### Any damages arising from the use of the library or service or any other legal situation cannot be associated with the scrape.do legal entity and team. The responsibility lies entirely with the user.
